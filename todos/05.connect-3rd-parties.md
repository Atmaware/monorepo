## Connecting Omnivore with Notion
Good news! Omnivore already has built-in Notion integration. Let me explain how to use it and how you could extend it if needed.

### Using Omnivore's Existing Notion Integration
Omnivore has a native Notion integration that allows you to export your saved articles and highlights to Notion. Here's how to set it up:

Access Integrations Settings:
Go to Settings > Integrations in the Omnivore web app
Connect with Notion:
Click on the Notion integration option
Authorize Omnivore to access your Notion workspace
Select a database where your articles will be exported
Configure Export Settings:
Choose which properties to include (title, URL, highlights, etc.)
Set up automatic export rules if desired
The integration uses Notion's official API to create pages in your selected database with structured properties for each article.

### How the Integration Works
Based on the codebase, Omnivore's Notion integration:

Uses the @notionhq/client library to interact with Notion's API
Converts articles to Notion pages with properly formatted properties
Supports exporting highlights as block content within the page
Handles authentication via OAuth

### Extending the Integration
If you want to enhance the Notion integration, here are some approaches:

1. Customize the Export Format
You can modify the itemToNotionPage function in /packages/api/src/services/integrations/notion.ts to change how articles are formatted when exported to Notion.

2. Add Bidirectional Sync
The current integration is one-way (Omnivore â†’ Notion). To implement bidirectional sync:

typescript
CopyInsert
// Create a new service for importing from Notion
export class NotionImporter {
  async importFromNotion(userId: string, databaseId: string) {
    // 1. Query the Notion database for pages
    // 2. Convert Notion pages to Omnivore article format
    // 3. Create articles in Omnivore that don't exist
    // 4. Update existing articles if needed
  }
}
3. Implement Real-time Updates
You could use Notion's webhook capabilities to keep content in sync:

typescript
CopyInsert
// Set up a webhook endpoint in Omnivore
app.post('/api/notion-webhook', async (req, res) => {
  const { pageId, eventType } = req.body;
  
  if (eventType === 'page_updated') {
    // Update corresponding article in Omnivore
  }
  
  res.status(200).send('OK');
});
4. Add Bulk Import from Notion
Create a feature to import multiple Notion pages at once:

typescript
CopyInsert
async function bulkImportFromNotion(userId: string, databaseId: string) {
  // Fetch all pages from the specified database
  const pages = await notionClient.databases.query({
    database_id: databaseId
  });
  
  // Process each page and create articles in Omnivore
  for (const page of pages.results) {
    await createArticleFromNotionPage(userId, page);
  }
}

### Implementation Steps
If you want to implement custom Notion integration features:

Set up Notion API credentials:
Add your Notion API credentials to the environment variables
Update the .env.local file with your Notion API keys
Extend the existing integration code:
Modify /packages/api/src/services/integrations/notion.ts
Add new GraphQL resolvers for your custom functionality
Update the UI:
Enhance the integration settings page to include your new features
Add UI components for bidirectional sync options
Omnivore's modular architecture makes it relatively straightforward to extend the existing Notion integration with custom features to meet your specific needs.